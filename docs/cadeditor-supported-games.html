<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">

    <title>Формат хранения уровней в ROM-файлах</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Формат хранения уровней в ROM-файлах</h1>
        <h2>Описание формата хранений данных об уровнях</h2>
      </div>
    </header>

    <div class="container">
      <section id="main_content">

<p>
<b>CadEditor</b> - редактор уровней для множества игр под разные платформы (NES, Sega Mega Drive, GBA).
</p>
<p>
<h3>Список форматов данных уровней в играх, поддерживаемых редактором.</h3>
</p>

<table border=1>

<tr>
<th width=30%>Название игры</th>
<th>Формат блоков</th>
<th>Формат макроблоков</th>
<th>Формат экранов</th>
</tr>

<tr>
<td>

<table>
<tr><td>Darkwing Duck</td></tr>
<tr><td>Little Mermaid</td></tr>
<tr><td>Tale Spin</td></tr>
<tr><td>Chip & Dale</td></tr>
<tr><td>Megaman 3</td></tr>
<tr><td>Megaman 4</td></tr>
<tr><td>Megaman 5</td></tr>
<tr><td>Mighty Final Fight</td></tr>
<tr><td>Adventure in the Magic Kingdom</td></tr>
</table>

</td>
<td>Aligned(2x2 + palByte1)</td>
<td>Linear(2x2)</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>Duck Tales</td>
<td>Aligned(2x2 + palByte1)</td>
<td>Linear(2x2)</td>
<td>Linear(8x8)<br>
<i>прим.1</i>
</td>
</tr>

<tr>
<td>Duck Tales 2</td>
<td>Aligned(2x2 + palByte1p)</td>
<td>Aligned(2x2)</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>Chip & Dale 2</td>
<td>Aligned(2x2 + palByte1p)</td>
<td>-</td>
<td>Linear(16x15)</td>
</tr>

<tr>
<td>
Tiny Toon Adventures
</td>
<td>Aligned(2x2)</td>
<td>Aligned(2x2 + palByte4)</td>
<td>Linear(8x6)</td>
</tr>

<tr>
<td>Tiny Toon Adventures 2</td>
<td>Linear(2x2) + palByte1p</td>
<td>-</td>
<td>Linear(16x15); Linear(16x12)</td>
</tr>

<tr>
<table>
<tr><td>Time Diver Eon Man</td></tr>
<tr><td>Super City Tank</td></tr>
<tr><td>Doraemon</td></tr>
</table>
<td>Linear(2x2) + palByte1</td>
<td>-</td>
<td>-</td>
</tr>

<tr>
<td>
Flintstones RoD&H
</td>
<td>Linear(2x2)T + palByte1</td>
<td>Linear(4x4)T</td>
<td>(-)T</td>
</tr>

<tr>
<td>
Flintstones SaDP
</td>
<td>Linear(2x2)T + palByte1</td>
<td>Linear(2x4)T</td>
<td>(-)T</td>
</tr>

<tr>
<td>
Jungle Book
</td>
<td>Aligned(2x2 + palByte1)x2</td>
<td>Linear(2x2)x2</td>
<td>-</td>
</tr>

<tr>
<td>
<table>
<tr><td>Tom & Jerry</td></tr>
<tr><td>Terminator 2</td></tr>
<tr><td>Takahashi Meijin no Bugutte Honey</td></tr>
</table>
</td>
<td>Aligned(2x2 + palByte1)</td>
<td>-</td>
<td>-</td>
</tr>

<tr>
<td>
Crystal Mines
</td>
<td>Unaligned(2x2 + palByte1)</td>
<td>-</td>
<td>-</td>
</tr>

<tr>
<td>
<table>
<tr><td>Aladdin</td></tr>
<tr><td>Earth Worm Jim 3</td></tr>
<tr><td>Super Mario World</td></tr>
<tr><td>Donkey Kong Country 4</td></tr>
<tr><td>Titenic</td></tr>
<tr><td>Harry's Legend</td></tr>
<tr><td>Final Fight 3</td></tr>
<tr><td>Sonic the Hedgehog</td></tr>
<tr><td>Tiny Toon 6</td></tr>
</table>
</td>
<td>Aligned(2x2 + palByte1)</td>
<td>-</td>
<td>Linear(16x16)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Little Nemo</td></tr>
<tr><td>Super Spy Hunter</td></tr>
</table>
</td>
<td>Aligned(2x2 + palByte1)</td>
<td>Aligned(2x2)</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>
Rockin' Kats
</td>
<td>Linear(2x2 + palByte1)</td>
<td>Linear(1x4)-><br>
Linear(4x1)-><br>
Linear(2x1)</td>
<td>Linear(3x2)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Battletoads</td></tr>
<tr><td>Battletoads & DD</td></tr>
<tr><td>Mickey's Adventure in Numberland</td></tr>
<tr><td>Alien 3</td></tr>
<tr><td>Darkman</td></tr>
<tr><td>Robocop 2</td></tr>
</table>
</td>
<td>Linear(4x4) + palByte4</td>
<td>-</td>
<td>-</td>
</tr>

<tr>
<td>
<table>
<tr><td>TMNT 3</td></tr>
<tr><td>Contra Force</td></tr>
<tr><td>Super C</td></tr>
<tr><td>Adventure Island 2</td></tr>
<tr><td>Adventure Island 3</td></tr>
<tr><td>Zen Intergalactic Ninja</td></tr>
<tr><td>Castle of Dragon</td></tr>
<tr><td>Rollergames</td></tr>
<tr><td>Isolated Warrior</td></tr>
</table>
</td>
<td>Linear(4x4) + palByte4</td>
<td>-</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>
Super Contra 7 (unl)
</td>
<td>Linear(4x4) + palByte4</td>
<td>-</td>
<td>Linear(8x7)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Mickey Mouse</td></tr>
<tr><td>Mickey Mouse 3</td></tr>
</table>
</td>
<td>Linear(2x2) + palByte1</td>
<td>Linear(2x2)</td>
<td>Linear(8x6)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Moon Crystal</td></tr>
<tr><td>Don Doko Don</td></tr>
</table>
</td>
<td>Linear(2x2)</td>
<td>-</td>
<td>Linear(16x15), palByteX</td>
</tr>

<tr>
<td>
Dooly Bravo Land
</td>
<td>Linear(2x2)</td>
<td>-</td>
<td>Linear(16x14), palByteX</td>
</tr>

<tr>
<td>
<table>
<tr><td>Toxic Crusaders</td></tr>
<tr><td>Insector X</td></tr>
</table>
</td>
<td>Linear(2x2)</td>
<td>-</td>
<td>Linear(16x13), palByteX</td>
</tr>

<tr>
<td>
<table>
<tr><td>Donald Land</td></tr>
<tr><td>Athena</td></tr>
</table>
</td>
<td>Linear(2x2) + palByte1</td>
<td>-</td>
<td>Linear(16x13)</td>
</tr>

<tr>
<td>
Challenger
</td>
<td>Linear(4x4) + palByte4</td>
<td>Linear(2x2)</td>
<td>-</td>
</tr>

<tr>
<td>
Felix the Cat
</td>
<td>Aligned(2x2 + palByte1)</td>
<td>-</td>
<td>Comp(-)</td>
</tr>

<tr>
<td>
Jurassic Park
</td>
<td>Linear(2x2)</td>
<td>-</td>
<td>Comp(-), palByteX</td>
</tr>

<tr>
<td>
Ninja Cat
</td>
<td>Linear(2x2)</td>
<td>Linear(2x2) + palByte4</td>
<td>Linear(8x5)T</td>
</tr>

<tr>
<td>
Shadow of the Ninja
</td>
<td>Linear(2x2)T</td>
<td>Linear(mix(2x2, palByte4))T</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>
Little Samson
</td>
<td>const(2x2)</td>
<td>Linear(mix(2x2, palByte4))</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>
Gun Smoke
</td>
<td>const(2x2)</td>
<td>Linear(2x2 + palByte4)</td>
<td>(-)Iy</td>
</tr>

<tr>
<td>
<table>
<tr><td>New Ghostbusters 2</td></tr>
<tr><td>BreakThru</td></tr>
</table>
</td>
<td>Aligned(2x2 + palByte1)</td>
<td>-</td>
<td>Linear(16x15)</td>
</tr>

<tr>
<td>
Captain Silver
</td>
<td>Linear(2x2 + palByte1)</td>
<td>-</td>
<td>Linear(16x15)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Captain America</td></tr>
<tr><td>Ghosts'n Goblins</td></tr>
<tr><td>Final Mission</td></tr>
<tr><td>Little Red Hood</td></tr>
<tr><td>Kaiketsu Yanchamaru 3</td></tr>
<tr><td>Happily Ever After</td></tr>
</table>
</td>
<td>Linear(2x2) + palByte1</td>
<td>-</td>
<td>Linear(16x15)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Bad Dudes</td></tr>
<tr><td>Heavy Barrel</td></tr>
</table>
</td>
<td>Linear(2x2 + palByte1)</td>
<td>-</td>
<td>Linear(16xVar)</td>
</tr>

<tr>
<td>
Bugs Bunny Crazy Castle
</td>
<td>Linear(2x2 + palByte1)</td>
<td>-</td>
<td>-</td>
</tr>

<tr>
<td>
<table>
<tr><td>Cheetahmen</td></tr>
<tr><td>Cheetahmen 2</td></tr>
</table>
</td>
<td>Linear(2x2) + palByte1</td>
<td>-</td>
<td>Linear(16x16)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Low G Man</td></tr>
<tr><td>Utsurun Desu</td></tr>
<tr><td>Karnov</td></tr>
</table>
</td>
<td>Linear(2x2) + palByte1</td>
<td>-</td>
<td>Linear(16x12)</td>
</tr>

<tr>
<td>
Dragon, The
</td>
<td>Linear(2x2)</td>
<td>-</td>
<td>Linear(16x12), palByteX</td>
</tr>

<tr>
<td>
Shatterhand
</td>
<td>Linear(2x2)T + palByte1</td>
<td>Linear(2x2)T</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>
Three Eyes Story
</td>
<td>Linear(2x2) + palByte1</td>
<td>Linear(2x2)T</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>
Raf World
</td>
<td>Linear(2x2) + palByte1</td>
<td>Linear(2x2)</td>
<td>Linear(8x8)</td>
</tr>

<tr>
<td>
Ninja Gaiden
</td>
<td>Linear(2x2)T</td>
<td>Linear(2x2)T + palByte4</td>
<td>(-)T</td>
</tr>

<tr>
<td>
Ninja Gaiden 2
</td>
<td>Linear(2x2)T</td>
<td>Linear(2x2) + palByte4</td>
<td>(-)T</td>
</tr>

<tr>
<td>
Ninja Gaiden 3
</td>
<td>Linear(2x2)</td>
<td>Linear(2x2) + palByte4</td>
<td>(-)T</td>
</tr>

<tr>
<td>
<table>
<tr><td>Yo-Noid</td></tr>
<tr><td>Jackie Chan Action Kung Fu</td></tr>
</table>
</td>
<td>Linear(4x4) + palByte4</td>
<td>-</td>
<td>(-)T</td>
</tr>

<tr>
<td>
Jackal
</td>
<td>Linear(4x4)Iy + palByte4</td>
<td>-</td>
<td>(-)Iy</td>
</tr>

<tr>
<td>
<table>
<tr><td>Power Blade</td></tr>
<tr><td>Power Blade 2</td></tr>
<tr><td>Batman Returns</td></tr>
<tr><td>TMNT</td></tr>
<tr><td>TMNT 2</td></tr>
<tr><td>Bucky O'Hare</td></tr>
<tr><td>Adventures of Bayou Billy</td></tr>
</table>
</td>
<td>Linear(4x4) + palByte4</td>
<td>-</td>
<td>Linear(8x6)</td>
</tr>

<tr>
<td>
Monster in my pocket
</td>
<td>Linear(4x4) + palByte4</td>
<td>-</td>
<td>Linear(8x6); Linear(8x8)</td>
</tr>

<tr>
<td>
Batman
</td>
<td>Linear(4x2)</td>
<td>-</td>
<td>Linear(8x15), palByteX</td>
</tr>

<tr>
<td>
Ninja Crusaders
</td>
<td>Linear(4x1)</td>
<td>-</td>
<td>Linear(8x24), palByteX</td>
</tr>

<tr>
<td>
Dragon Fighter
</td>
<td>Linear(2x2 + palByte1)T</td>
<td>Linear(2x2 + palByte1)T</td>
<td>(-)T</td>
</tr>

<tr>
<td>
Castlevania
</td>
<td>Linear(4x4 + palByte4)</td>
<td>-</td>
<td>(8x6)T</td>
</tr>

<tr>
<td>
Addams Family
</td>
<td>Linear(1x20); Linear(1x6)</td>
<td>-</td>
<td>Linear(-), palByteX</td>
</tr>

<tr>
<td>
Abadox
</td>
<td>Linear(4x30 + palByte30)</td>
<td>-</td>
<td>Linear(-)</td>
</tr>

<tr>
<td>
Captain Planet
</td>
<td>Linear(4x8 + palByte8)</td>
<td>-</td>
<td>Linear(-)</td>
</tr>

<tr>
<td>
<table>
<tr><td>Contra Spirits</td></tr>
<tr><td>Mickey Mania</td></tr>
</table>
</td>
<td>Linear(2x2)W2</td>
<td>-</td>
<td>Linear(16x15), palByteX</td>
</tr>

<tr>
<td>
Takeshi no Chousenjou
</td>
<td>Linear(2x2)T</td>
<td>-</td>
<td>Linear(15x2)T, palByteX</td>
</tr>

<tr>
<td>
Circus Caper
</td>
<td>Linear(2x2)T</td>
<td>-</td>
<td>(-)T, palByteX</td>
</tr>


</table>

<p>
<h3>Обозначения</h3>
<b>(NxM)</b> - структура из N единиц в ширину и M в ширину. Var вместо числа означает, что в разных местах игры используются разные размеры, в основном для описания экранов<br>
<b>()T</b> - структура хранится в транспонированном виде.<br>
<b>()Iy</b> - структура хранится в инвертированном по оси Y виде.<br>
<b>()x2</b> - игра содержит по две копии наборов данных на уровень.<br>
<b>()W2</b> - индексы элементов кодируются с помощью слова длиной в 2 байта<br>
<b>Linear()</b> - структуры хранятся последовательно, одна за другой. <br>
<b>Aligned()</b> - структуры хранятся массивами из отдельных частей (отдельный массив из всех 1х элементов структуры, затем отдельный массив из всех 2х элементов структуры и т.д.).<br>
<b>Unaligned()</b> - то же, что и Aligned(), но массивы хранятся в памяти не друг за другом, а раздельно (между ними может находиться переменное число других данных, не связанных с описанием блоков)<br>
<b>Const()</b> - индексы элементов структуры не хранятся, а вычисляются из индексов самой структуры.<br>
<b>Aligned(NxM + palByteX)</b> - массивы из отдельных частей структуры из NxM элементов, а затем массив из частей palByteX, в котором элементы означают доп. данные для соотвествующих индексу структур.<br>
<b>Linear(NxM)+ palByteX</b> - последовательное описание структур размером NxM, а затем описание массива из частей palByteX, в котором элементы означают доп. данных для соотвествующих индексу структур<br>
<b>(NxM)->(PxQ)</b> - структура PxQ, образованная из P элементов в ширину и Q элементов в высоту, где элементы структуры сами являются структурами из NxM элементов.<br>
<b>Linear(NxM),palByteX</b> - описание бит палитры отдельным слоем от структур.<br>
<b>Comp()</b> - данные в ROM сжаты каким-либо образом.<br>
<b>Linear(NxM); Linear(PxQ)</b> - в игре используются и структуры размером NxM, и структуры размером PxQ элементов в разных местах.<br>
<b>mix(NxM, palByteX)</b> - биты палитры хранятся в тех же байтах, что и индексы элементов структуры.<br>
</p>

<p>
<h3>Способы хранения бит палитры</h3>
<b>palByte1</b> - биты палитры хранятся по 2 бита в байте. Дополнительные 6 бит байта в зависимости от игры могут использоваться для хранения доп. информации (тип физики блока) или не использоваться никак.<br>
<b>palByte1p</b> - биты палитры хранятся сжатыми по 4 штуки в одном байте для четырёх отдельных (никак не связанных между собой) блоков<br>
<b>palByte4</b> - биты палитры хранятся в одном байте по 4 штуки для 4х блоков, связанных в один макроблок или для блока в 4x4 тайла.<br>
</p>

<p>
<h3>Примечения</h3>
<b><i>прим.1</i></b> Отдельно хранятся старшие биты номеров блоков (игра поддерживает до 512 блоков на уровень)<br>
</p>

<p>
<h3>Todo</h3>
<ul>
<li>Добавить описание игр на SMD</li>
<li>Добавить описание способов кодирования физики блоков</li>
</ul>
</p>

  </section>
  </div>
  
   <div class="dashed">
   <div class="container" Aligned="center">
   <a href="index.html" Aligned="right">Назад</a>
   </div>
   </div>
  </body>
</html>
