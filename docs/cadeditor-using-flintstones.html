<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">

    <title>Редактирование игры Flintstones: Rescue Dino and Hoppy [NES]</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Редактирование игры Flintstones: Rescue Dino and Hoppy [NES]</h1>
        <h2>Пример редактирования уровней в игре Flintstones: Rescue Dino and Hoppy [NES], а также использование плагинов и модулей, доступных для данной игры</h2>
      </div>
    </header>

<div class="container">
  <section id="main_content">

<p>
Автор статьи:<br>
<b>Kinbeas</b><br>
<br>
Оригинал:<br>
<a href="https://www.emu-land.net/forum/index.php/topic,80421.0.html">https://www.emu-land.net/forum/index.php/topic,80421.0.html</a><br>
</p>

<p>
Рассмотрим редактирование на примере первого уровня.
</p>
<p>
<i>Но имейте ввиду, что первый уровень самый сложный для редактирования, так как там слишком много уникальных блоков (практически весь уровень из уникальных блоков) и нюансов по склейке блоков друг с другом (визуальных и по свойствам). Есть выступы, через которые можно пройти и через которые нельзя. Поэтому если побаловаться, лучше потом выбирать или город с лодкой или ледяной уровень. Джунгли тоже сложноваты. </i>
</p>
<h2><a id="osn" class="anchor" href="#osn" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Основы</h2>

<p>
Скачиваем редактор, разархивируем, запускаем.
</p>
<p>
В <i>Config file name</i> выбираем:<br>
<i>\settings_flintstones_rescue_of_dino_and_hoppy\Settings_Flintstones-1.cs</i>.
</p>
<p>
В <i>ROM file name</i> выбираем:<br>
<i>Flintstones, The - The Rescue of Dino & Hoppy (U) [!].nes</i>.
</p>

<p>
Важно открывать именно эту региональную версию рома. Для японской или европейской версии отличаются адреса списка объектов, поэтому редактор объектов работать не будет.
</p>

<img src="images/flint_1.png" class="center-img">
<p>
Как только открывается редактор, назовём это фоновым режимом. В нём сразу можем редактировать уровень - менять блоки. Слева доступные блоки, справа - сам уровень. Всё просто и интуитивно понятно. Отмечу лишь, что на самой структуре уровня интересующие блоки можно копировать на правую кнопку мыши.
Вверху в меню можно нажать на лупу, чтобы регулировать масштаб отображения.
</p>

<h2><a id="bb" class="anchor" href="#bb" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Редактирование больших блоков (макроблоков)</h2>
<p>
Если вы решите, что вам нужны какие-то другие макроблоки, их можно отредактировать на кнопку 1 (на первом скрине) - <i>Macro Bloks Editor</i>. В этом окне справа у вас есть все доступные макроблоки, слева - все доступные на этом уровне микроблоки. Просто склеиваете из левых кусков большие блоки справа. На самих больших блоках так же можно копировать на правую кнопку мыши.
</p>
<img src="images/flint_2.png" class="center-img">
<p>
Естественно, редактировать вы должны те блоки, которые вам не нужны в первозданном их виде. Не рекомендую редактировать часто используемые блоки (например, землю и выступы), иначе по всему уровню появятся отредактированные и придётся вручную всё исправлять. На этот случай лучше всегда сохранять резервные копии рома, иначе с помощью редактора глобальные ошибки непоправимы. 
</p>
<p>
Рекомендую делать так. Пробежаться взглядом по уровню, выявить те блоки, которые вам не нужны - удалить/заменить их на уровне. Затем нажать на кнопку 7. Там выбираем в папке редактора <i>\settings_flintstones_rescue_of_dino_and_hoppy\Settings_Flintstones-1.cs</i> и нажимаем Run. 
</p>
<img src="images/flint_3.png" class="center-img">
<p>
Вот например я на уровне убрал два блока, составляющие череп большого скелета. Теперь скрипт выдаёт, что блоки 36 и 37 в данный момент не используются. Нумерацию блоков можно увидеть в окне <i>Macro Blocks Editor</i> в самом правом нижнем углу (отображается номер блока, на который навели курсор мыши).
</p>

<h2><a id="bed" class="anchor" href="#bed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Редактирование блоков</h2>
<p>
В предыдущем разделе мы составляли глобальные блоки из мини блоков. Но и мини блоки состоят из 2х2 тайлов. И именно эти блоки обладают определёнными свойствами.
Чтобы редактировать их, нажимаем кнопку <b>2</b> - <i>Blocks Editor</i>.  
</p>
<img src="images/flint_4.png" class="center-img">
<p>
Слева мы видим набор тайлов. Справа - сами блоки, которые 2х2 состоят из этих тайлов. например, блок 0 состоит из четырёх одинаков сплошных тайлов. Здесь также можем склеивать блоки, как душе угодно. Правее от блоков можно выбрать одну из четырёх основных палитр. Ещё правее - задаём блоку свойство.
Ниже приведу основные из них:
</p>
<p>
<pre>
Типы блоков:
0 - фоновый. Фред никак с ним не взаимодействует.
1 - платформа, на которую можно запрыгнуть и снизу.
2 - выступ справа (за который цепляемся, чтобы подняться)
3 - выступ слева
4 - выступ с двух сторон (например, кости скелета на уровне с городом и лодкой)
5 - пружина, батут
6 - шипы нижние
7 - шипы верхние
9 - конвейер влево
А - конвейер вправо
40,42 - скатывание по диагонали вниз
81 - сплошной блок, через который нельзя пройти
</pre>
</p>

<p>
Если вас не устраивают какие-то тайлы, их можно перерисовать. Только уже с помощью сторонних специальных программ, например <i>yychr_2012_04_07_yur.</i> 
</p>
<p>
<b>(!)Только будьте осторожны с сохранениями. Если открывать один и тот же ром разными программами и параллельно вносить изменения, сохранение в одной программе сотрёт изменения, сделанные в другой программе. Поэтому в таких случаях всегда действуйте последовательно! </b>
</p>

<h2><a id="not" class="anchor" href="#not" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Что нельзя менять с помощью редактора</h2>
<p>
С помощью редактора нельзя на уровне поменять:
<ol>
<li>Подключение и отключение дополнительных палитр (например, палитра рога в джунглях).</li>
<li>Подключение и отключение дополнительных банков тайлов (графика для всех крупных скелетов и т.п.).</li>
<li>Свойства фоновых изображений (спрайты могут быть на заднем плане, могут быть на переднем плане, а могут закрывать только врагов, но не закрывать Фреда).</li>
<li>Телепорты (которые, например, используются в замке, где вы заходите в проходы и появляетесь в другом месте).</li>
<li>В версии редактора 50 ещё не было конфига для последнего уровня, где мы попадаем в будущее.</li>
</ol>
</p>

<h2><a id="en" class="anchor" href="#en" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Расстановка объектов</h2>
<p>
Чтобы изменить расстановку врагов и призов, нажимаем кнопку <b>3</b> - <i>Enemy Editor.</i>
</p>
<p>
Сразу отмечу, что на экране может быть не больше двух разных врагов. Зато на самом уровне их можно ставить абсолютно любых - хоть со всей игры в один уровень поместить, так как данные каждого объекта (спрайты, палитра) подгружаются индивидуально.
</p>
<img src="images/flint_5.png" class="center-img">

<p>
Слева в ряд видим тонну объектов. Вот <a href="files/flintstones_objects.zip">архив</a> с вордовским файлом - там указаны изображения - какие призы, враги и интерактивные платформы скрываются за каждым номером. 
</p>

<p>
По центру вы видите саму карту с расставленными объектами. На правую кнопку мыши их можно выделять, затем перетаскивать или удалять.
Обратите внимание на левый верхний угол окна. Там есть активированное действие:
<ul>
<li><b>Create</b>. В том месте, где щёлкните левой кнопкой мыши по уровню, появится объект, выбранный в левых столбиках. Стоит отметить, что вам лишь со временем удастся прицеливаться так точно, чтобы объекты находились ровно на земле. Отмечу лишь, что они появляются немного правее от выбранного вами места.</li>
<li><b>Select</b>. Действие, чтобы лишь выбрать объект. Но гораздо проще выделять объект на правую кнопку мыши.</li>
<li><b>Delete</b>. Удаляем объект, на который укажем. Впрочем, объекты можно удалять и с помощью одноимённой клавиши на клавиатуре.</li>
</ul>
</p>

<p>
<b>А теперь ВНИМАНИЕ! ВАЖНЫЕ ВЕЩИ, КОТОРЫЕ НАДО ЗНАТЬ, ЧТОБЫ НЕ ИСПОРТИТЬ РОМ!</b>
</p>

<p>
Справа от уровня мы видим важную информацию.
</p>

<p>
Во-первых, чтобы переставленные объекты появлялись в игре, вам надо ОБАЯТЕЛЬНО ПЕРЕД КАЖДЫМ СОХРАНЕНИЕМ нажимать autosost objects (цифра 1)! Без автосортировки объектов они будут стоять в неправильном порядке и игра не будет их воспринимать. То есть все объекты, как они идут на уровне слева-направо, все они должны идти по-порядку в таблице <i>Objects list</i>.
</p>

<p>
Во-вторых, вам надо следить за допустимым количеством объектов (цифра 2). На каждом уровне цифра разная. На первом объектов 35, причём последний из них должен быть 0xFF. Добавлять объектов больше, чем положено - крайне не стоит.
</p>

<p>
В-третьих, вам крайне важно следить за тем, чтобы в конце этой самой таблицы был объект 0xFF (цифра 3)!!! Если его не будет, игра начнёт лагать после прохождения уровня. Когда вы удаляете объекты и нажимаете автосортировку, после чего повторно открываете редактор объектов, в конце может накапливаться несколько объектов 0xFF - они автоматически заполоняют пустое пространство. Лишние можно смело удалять, но один в конце всегда оставляйте!
</p>

  </section>
  </div>
  
   <div class="dashed">
   <div class="container" align="center">
   <a href="index.html" align="right">Назад</a>
   </div>
   </div>
  </body>
</html>
